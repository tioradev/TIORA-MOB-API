# ====================================================================
# TIORA-MOB-API - AWS Docker Deployment Environment Configuration
# ====================================================================

# ====================================================================
# APPLICATION CONFIGURATION
# ====================================================================
SPRING_APPLICATION_NAME=TIORA-MOB-API
SERVER_PORT=8080
SERVER_SERVLET_CONTEXT_PATH=/api
SPRING_PROFILES_ACTIVE=production

# ====================================================================
# DATABASE CONFIGURATION (Supabase PostgreSQL)
# ====================================================================
SPRING_DATASOURCE_URL=jdbc:postgresql://aws-1-ap-southeast-1.pooler.supabase.com:5432/postgres
SPRING_DATASOURCE_USERNAME=postgres.owejwmmudkzblmbysqsi
SPRING_DATASOURCE_PASSWORD=0M8ABmzJmDRXt9h3
SPRING_DATASOURCE_DRIVER_CLASS_NAME=org.postgresql.Driver

# ====================================================================
# CONNECTION POOL CONFIGURATION (HikariCP)
# ====================================================================
SPRING_DATASOURCE_HIKARI_MAXIMUM_POOL_SIZE=20
SPRING_DATASOURCE_HIKARI_MINIMUM_IDLE=5
SPRING_DATASOURCE_HIKARI_CONNECTION_TIMEOUT=30000
SPRING_DATASOURCE_HIKARI_IDLE_TIMEOUT=600000
SPRING_DATASOURCE_HIKARI_MAX_LIFETIME=1800000
SPRING_DATASOURCE_HIKARI_CONNECTION_TEST_QUERY=SELECT 1
SPRING_DATASOURCE_HIKARI_VALIDATION_TIMEOUT=3000
SPRING_DATASOURCE_HIKARI_POOL_NAME=SupabaseConnectionPool
SPRING_DATASOURCE_HIKARI_LEAK_DETECTION_THRESHOLD=60000
SPRING_DATASOURCE_HIKARI_AUTO_COMMIT=true
SPRING_DATASOURCE_HIKARI_REGISTER_MBEANS=true

# ====================================================================
# JPA / HIBERNATE CONFIGURATION
# ====================================================================
SPRING_JPA_HIBERNATE_DDL_AUTO=update
SPRING_JPA_PROPERTIES_HIBERNATE_DIALECT=org.hibernate.dialect.PostgreSQLDialect
SPRING_JPA_OPEN_IN_VIEW=false
SPRING_JPA_SHOW_SQL=false

# ====================================================================
# JACKSON CONFIGURATION
# ====================================================================
SPRING_JACKSON_DATE_FORMAT=yyyy-MM-dd HH:mm:ss
SPRING_JACKSON_TIME_ZONE=UTC
SPRING_JACKSON_SERIALIZATION_FAIL_ON_EMPTY_BEANS=false

# ====================================================================
# JWT SECURITY CONFIGURATION
# ====================================================================
APP_JWT_SECRET=YourProductionJwtSecretKey2025!@#$%^&*()_+1234567890abcdefghijklmnopqrstuvwxyz
APP_JWT_EXPIRATION=3600000
JWT_HEADER=Authorization
JWT_PREFIX=Bearer

# ====================================================================
# REDIS CONFIGURATION (AWS ElastiCache or Redis Cloud)
# ====================================================================
SPRING_DATA_REDIS_HOST=your-redis-cluster.cache.amazonaws.com
SPRING_DATA_REDIS_PORT=6379
SPRING_DATA_REDIS_DATABASE=0
SPRING_DATA_REDIS_TIMEOUT=2000ms
SPRING_DATA_REDIS_LETTUCE_POOL_MAX_ACTIVE=10
SPRING_DATA_REDIS_LETTUCE_POOL_MAX_IDLE=8
SPRING_DATA_REDIS_LETTUCE_POOL_MIN_IDLE=2

# Redis Streams Configuration
MOBILE_REDIS_STREAMS_APPOINTMENT_STREAM=salon:appointments
MOBILE_REDIS_STREAMS_CONSUMER_GROUP=mobile-backend-group
MOBILE_REDIS_STREAMS_CONSUMER_NAME=mobile-backend-consumer

# ====================================================================
# FILE UPLOAD CONFIGURATION
# ====================================================================
SPRING_SERVLET_MULTIPART_MAX_FILE_SIZE=10MB
SPRING_SERVLET_MULTIPART_MAX_REQUEST_SIZE=10MB
APP_UPLOAD_DIR=/app/uploads/salon

# ====================================================================
# EMAIL CONFIGURATION (AWS SES recommended for production)
# ====================================================================
SPRING_MAIL_HOST=email-smtp.us-east-1.amazonaws.com
SPRING_MAIL_PORT=587
SPRING_MAIL_USERNAME=your-aws-ses-smtp-username
SPRING_MAIL_PASSWORD=your-aws-ses-smtp-password
SPRING_MAIL_PROPERTIES_MAIL_SMTP_AUTH=true
SPRING_MAIL_PROPERTIES_MAIL_SMTP_STARTTLS_ENABLE=true

# ====================================================================
# APPLICATION SPECIFIC CONFIGURATION
# ====================================================================
APP_APPOINTMENT_CANCELLATION_HOURS=24
APP_TIMESLOT_DURATION_MINUTES=30
APP_NOTIFICATION_EMAIL_ENABLED=true
APP_NOTIFICATION_SMS_ENABLED=true

# ====================================================================
# LOGGING CONFIGURATION
# ====================================================================
LOGGING_LEVEL_ROOT=INFO
LOGGING_LEVEL_COM_TIORA_MOB=INFO
LOGGING_LEVEL_ORG_SPRINGFRAMEWORK_WEB=WARN
LOGGING_LEVEL_ORG_HIBERNATE=WARN
LOGGING_LEVEL_COM_ZAXXER_HIKARI=WARN
LOGGING_PATTERN_CONSOLE=%d{yyyy-MM-dd HH:mm:ss} [%thread] %-5level %logger{36} - %msg%n

# ====================================================================
# AWS SPECIFIC CONFIGURATION
# ====================================================================
AWS_REGION=ap-southeast-1
AWS_ACCESS_KEY_ID=your-aws-access-key-id
AWS_SECRET_ACCESS_KEY=your-aws-secret-access-key

# S3 Configuration for file uploads (optional)
AWS_S3_BUCKET_NAME=tiora-salon-uploads
AWS_S3_REGION=ap-southeast-1

# CloudWatch Logs (optional)
AWS_CLOUDWATCH_LOG_GROUP=/aws/ec2/tiora-mob-api
AWS_CLOUDWATCH_LOG_STREAM=tiora-mob-api-instance

# ====================================================================
# MONITORING & HEALTH CHECK CONFIGURATION
# ====================================================================
MANAGEMENT_ENDPOINTS_WEB_EXPOSURE_INCLUDE=health,info,metrics,prometheus
MANAGEMENT_ENDPOINT_HEALTH_SHOW_DETAILS=when-authorized
MANAGEMENT_METRICS_EXPORT_PROMETHEUS_ENABLED=true

# ====================================================================
# DOCKER & CONTAINER CONFIGURATION
# ====================================================================
JAVA_OPTS=-Xms512m -Xmx1024m -XX:+UseG1GC -XX:+UseContainerSupport
TZ=Asia/Colombo

# ====================================================================
# SECURITY CONFIGURATION
# ====================================================================
# SSL Configuration (if using HTTPS)
SERVER_SSL_ENABLED=false
# SERVER_SSL_KEY_STORE=classpath:keystore.p12
# SERVER_SSL_KEY_STORE_PASSWORD=your-keystore-password
# SERVER_SSL_KEY_STORE_TYPE=PKCS12

# CORS Configuration
CORS_ALLOWED_ORIGINS=https://your-frontend-domain.com,https://your-admin-panel.com
CORS_ALLOWED_METHODS=GET,POST,PUT,DELETE,OPTIONS
CORS_ALLOWED_HEADERS=*
CORS_ALLOW_CREDENTIALS=true

# ====================================================================
# EXTERNAL SERVICE CONFIGURATION
# ====================================================================
# Firebase Configuration (for profile images)
FIREBASE_PROJECT_ID=your-firebase-project-id
FIREBASE_STORAGE_BUCKET=your-firebase-project.appspot.com

# SMS Service Configuration (Twilio, AWS SNS, etc.)
SMS_SERVICE_PROVIDER=aws-sns
SMS_AWS_SNS_REGION=ap-southeast-1
SMS_FROM_NUMBER=+94771234567

# ====================================================================
# RATE LIMITING & THROTTLING
# ====================================================================
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS_PER_MINUTE=100
RATE_LIMIT_REQUESTS_PER_HOUR=1000

# ====================================================================
# ENVIRONMENT METADATA
# ====================================================================
ENVIRONMENT=production
VERSION=0.0.3-SNAPSHOT
BUILD_TIME=2025-09-04T14:30:00Z
DEPLOYMENT_DATE=2025-09-04
